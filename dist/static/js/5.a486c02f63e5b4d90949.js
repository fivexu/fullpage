webpackJsonp([5],{"/Y03":function(t,e){},JPBB:function(t,e){},Kr1H:function(t,e,a){a("JPBB");var i=a("mEwh")(a("Re8f"),a("QB43"),"data-v-4f5e1271",null);t.exports=i.exports},LqM4:function(t,e,a){a("/Y03");var i=a("mEwh")(a("hEqy"),a("URnm"),"data-v-f6185880",null);t.exports=i.exports},QB43:function(t,e){t.exports={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{ref:"wrapper",attrs:{id:"lineChart"}},[e("canvas",{ref:"canvas",attrs:{id:"canvas"},on:{mouseleave:this.canvasMouseLeave,mousemove:this.canvasMouseMove}}),this._v(" "),this.load&&this.rowData.length?e("div",{staticClass:"download",on:{click:this.download}},[this._v("下载图片")]):this._e()])},staticRenderFns:[]}},Re8f:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{rowData:{type:Array,default:[]},colData:{type:Array,default:function(){return[]}},colStart:{type:Number,default:1},row:{type:Number,default:5},load:{type:Boolean,default:!0},hoverLine:{type:Boolean,default:!0},playing:{type:Boolean,default:!0},imgType:{type:String,default:"jpg"}},data:function(){return{Axis:[]}},methods:{saveFile:function(t,e){var a=document.createElementNS("http://www.w3.org/1999/xhtml","a");a.href=t,a.download=e;var i=document.createEvent("MouseEvents");i.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),a.dispatchEvent(i)},download:function(){var t=this.$refs.canvas;this.imgType.match(/png|jpeg|jpg|bmp|gif/)||(this.imgType="jpg"),this.saveFile(t.toDataURL("image/"+this.imgType),(new Date).getTime()+"."+this.imgType)},canvasMouseMove:function(t){if(t=t||event,this.hoverLine||this.isPC())for(var e=this.$refs.canvas.getContext("2d"),a=t.clientX-this.$refs.wrapper.offsetLeft-this.$refs.wrapper.parentNode.offsetLeft,i=0;i<this.Axis.length;i++)a>=parseInt(this.Axis[i].x)-2&&a<=parseInt(this.Axis[i].x)+2&&(e.clearRect(0,0,this.$refs.canvas.offsetWidth,this.$refs.canvas.offsetHeight),this.initCanvas(!1),this.createStroke(this.Axis[i].x,0,this.Axis[i].x,this.$refs.canvas.offsetHeight,e))},canvasMouseLeave:function(){this.hoverLine&&this.initCanvas(!1)},numberToFixed:function(t){return t=t.toFixed(2),t=parseInt(t)},createCanvas:function(){var t=this;clearInterval(this.createTimer),this.createTimer=setInterval(function(){t.createAxis(),t.rowData.length&&(t.initCanvas(t.playing),clearInterval(t.createTimer))},30)},getNumberSize:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e?5*Math.floor(t/5):t<0&&!e?5*Math.ceil(t/5):t<0?5*Math.ceil(t/5):t>=0?5*Math.ceil(t/5):void 0},setRowNumber:function(t,e){if(this.rowData.length)for(var a=(t-50)/this.row,i=this.getNumberSize(Math.max.apply(Math,this.rowData)),s=this.getNumberSize(Math.min.apply(Math,this.rowData),!0),n=i-s,r=0;r<this.row;r++)this.createText(20,t-(47+r*a),e,this.numberToFixed(s+r*n/(this.row-1)))},setColNumber:function(t,e,a){for(var i=this.colStart;i<this.rowData.length+this.colStart;i++)this.createText(58+(t-60)/this.rowData.length*(i-this.colStart),e-20,a,this.colData.length<=0?i:this.colData[i-1])},setWeatherPosition:function(t){var e=this.getNumberSize(Math.max.apply(Math,this.rowData)),a=this.getNumberSize(Math.min.apply(Math,this.rowData),!0),i=(t-a)/(e-a<=0?1:e-a);return(this.row-1)*((this.$refs.canvas.offsetHeight-50)/this.row)*Math.abs(i)},createArc:function(t,e,a){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#fff",s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3;a.beginPath(),a.fillStyle=i,a.strokeStyle=i,a.arc(t,e,s,n,4*Math.PI),a.fill(),a.stroke(),a.closePath()},createText:function(t,e,a,i){a.beginPath(),a.fillStyle="#fff",a.fillText(i,t,e),a.closePath()},createStroke:function(t,e,a,i,s){s.beginPath(),s.moveTo(t,e),s.lineTo(a,i),s.lineWidth=1,s.strokeStyle="#fff",s.stroke(),s.closePath()},createAxis:function(){if(this.rowData.length&&this.$refs.wrapper){this.Axis=[];for(var t=this.getNumberSize(Math.max.apply(Math,this.rowData)),e=this.getNumberSize(Math.min.apply(Math,this.rowData)),a=t-e==0?1:t-e,i=this.$refs.canvas.offsetWidth,s=this.$refs.canvas.offsetHeight,n=0;n<this.rowData.length;n++)this.Axis.push({x:60+(i-60)/this.rowData.length*n,y:1===a?this.$refs.canvas.offsetHeight/2:s-this.setWeatherPosition(this.rowData[n])-50})}},initLine:function(t){var e=this,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=0;if(clearInterval(this.timer),this.rowData.length)if(a)this.timer=setInterval(function(){e.createText(e.Axis[i].x-5,e.Axis[i].y-10,t,e.rowData[i]),e.createArc(e.Axis[i].x,e.Axis[i].y,t),e.Axis[i+1]?(e.createStroke(e.Axis[i].x,e.Axis[i].y,e.Axis[i+1].x,e.Axis[i+1].y,t),i++):clearInterval(e.timer)},30);else for(var s=0;s<this.Axis.length;s++){if(this.createArc(this.Axis[s].x,this.Axis[s].y,t),this.createText(this.Axis[s].x-5,this.Axis[s].y-10,t,this.rowData[s]),!this.Axis[s+1])return;this.createStroke(this.Axis[s].x,this.Axis[s].y,this.Axis[s+1].x,this.Axis[s+1].y,t)}},initCanvas:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.playing,e=this.$refs.canvas,a=e.getContext("2d");if(this.$refs.wrapper){var i=this.$refs.canvas.offsetWidth,s=this.$refs.canvas.offsetHeight;e.width=this.$refs.canvas.offsetWidth,e.height=this.$refs.canvas.offsetHeight,a.clearRect(0,0,i,s),a.fillStyle="transparent",a.fillRect(0,0,i,s),this.setRowNumber(s,a),this.setColNumber(i,s,a),this.initLine(a,t)}}},mounted:function(){var t=this;this.rowData.length&&(this.createCanvas(),window.addEventListener("resize",function(){t.$refs.wrapper&&(t.createAxis(),t.initCanvas())}))},watch:{rowData:function(){this.rowData.length&&(clearInterval(this.timer),this.createAxis(),this.initCanvas())}},deactivated:function(){clearInterval(this.createTimer),clearInterval(this.timer)}}},URnm:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{style:{background:"url('static/weatherBg/"+t.bgImg+".jpg') no-repeat 0 0 / cover fixed"},attrs:{id:"home"}},[a("div",{staticClass:"inner"},[""!==t.city?a("div",{staticClass:"position"},[t._m(0),t._v(" "+t._s(t.city)+", "+t._s(t.province)+",中国\n        "),t.searchShow?a("input",{ref:"searchInput",attrs:{type:"text",autofocus:"autofocus",placeholder:"请输入您想查找的城市"},on:{keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.searchKeyDown(e)}}}):t._e(),t._v(" "),a("i",{staticClass:"icon-search",on:{click:t.search}})]):t._e(),t._v(" "),a("dl",{staticClass:"content"},[a("dt",[a("h2",[t._v(t._s(t.ToDayWenDU)),t.ToDayWenDU?a("span"):t._e()]),t._v(" "),a("span",[a("i",{class:t.icon})]),t._v(" "),a("em",[t._v(t._s(t.ToDayTianQi))])]),t._v(" "),a("dd",{staticClass:"ac text_hide"},[a("span",[t._v("今日天气提示")]),t._v(" "),a("span",[t._v(t._s(t.tips))])])]),t._v(" "),a("div",{staticClass:"wrapper"},[a("div",{staticClass:"more_weather"},t._l(t.weatherList,function(e){return a("ul",{staticClass:"weather_list"},[a("li",[a("div",{staticClass:"item"},[t._v(t._s(null===e.time?"暂无":e.time))]),t._v(" "),a("div",{staticClass:"item"},[t._v(t._s(null===e.day?"暂无":e.day))]),t._v(" "),a("div",{staticClass:"item"},[t._v(t._s(null===e.day_tianqi?"暂无":e.day_tianqi))]),t._v(" "),a("div",{staticClass:"item text_hide"},[t._v("\n                "+t._s(null===e.day_wendu?"暂无":e.day_wendu)),null!==e.day_wendu?a("span",[t._v("℃")]):t._e()]),t._v(" "),a("div",{staticClass:"item"},[t._v(t._s(null===e.day_wind?"暂无":e.day_wind))])]),t._v(" "),a("li",[a("div",{staticClass:"item"},[t._v(t._s(null===e.time?"暂无":e.time))]),t._v(" "),a("div",{staticClass:"item"},[t._v(t._s(null===e.night?"暂无":e.night))]),t._v(" "),a("div",{staticClass:"item"},[t._v(t._s(null===e.night_tianqi?"暂无":e.night_tianqi))]),t._v(" "),a("div",{staticClass:"item text_hide"},[t._v(t._s(""===e.day_wendu?"暂无":e.night_wendu)),null!==e.night_wendu?a("span",[t._v("℃")]):t._e()]),t._v(" "),a("div",{staticClass:"item"},[t._v(t._s(null===e.night_wind?"暂无":e.night_wind))])])])})),t._v(" "),a("div",{staticClass:"rank"},[a("h4",{staticClass:"text_hide"},[t._v("历年天气统计概况")]),t._v(" "),t.rankList.length?a("ul",[a("Li",[a("p",[a("span",[t._v("月最高气温")]),t._v(" : "+t._s(t.rankList[0])+"℃ (出现在"+t._s(t.rankList[1])+")")])]),t._v(" "),a("Li",[a("p",[a("span",[t._v("月最低气温")]),t._v(" : "+t._s(t.rankList[2])+"℃ (出现在"+t._s(t.rankList[3])+")")])])],1):t._e()])]),t._v(" "),a("div",{staticClass:"canvas_wrapper",on:{touchstart:function(e){if(!("button"in e)&&t._k(e.keyCode,"preve",void 0,e.key))return null;e.stopPropagation(),t.canvasTouchStart(e)},touchmove:function(e){if(!("button"in e)&&t._k(e.keyCode,"preve",void 0,e.key))return null;e.stopPropagation(),t.canvasTouchMove(e)},touchend:function(e){if(!("button"in e)&&t._k(e.keyCode,"preve",void 0,e.key))return null;e.stopPropagation(),t.canvasTouchEnd(e)}}},[a("div",{ref:"canvas",staticClass:"canvas"},[t.canvasList.length?a("div",{staticClass:"btn"},[a("button",{class:{ac:"day"===t.dayBtn},on:{click:function(e){t.btn(t.dayList,"day")}}},[t._v("白天")]),t._v(" "),a("button",{class:{ac:"night"===t.dayBtn},on:{click:function(e){t.btn(t.nightList,"night")}}},[t._v("晚上")])]):t._e(),t._v(" "),a("line-chart",{attrs:{rowData:t.canvasList,colData:t.sunList}})],1)]),t._v(" "),a("foot-box"),t._v(" "),t.loaded||t.error?t._e():a("loading")],1),t._v(" "),t.error?a("wrong"):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("i",{staticClass:"icon-position"})])}]}},hEqy:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("T452"),s=a("BMa3"),n=a.n(s),r=a("Oxpl"),o=a("Kr1H"),h=a.n(o),c=a("y/jF"),l=a.n(c),v=a("v0QW"),d=a.n(v),u=a("dQCR"),f=a.n(u);e.default={data:function(){return{loaded:!1,error:!1,dayBtn:(new Date).getHours()>18?"night":"day",city:"",province:"",searchShow:!1,weatherList:[],ToDayWenDU:"",ToDayTianQi:"",bgImg:"晴",tips:"",icon:"",dayList:[],rankList:[],nightList:[],canvasList:[],sunList:[],deltaX:0}},created:function(){this.touch={}},methods:{canvasTouchStart:function(t){this.touch.initiated=!0;var e=t.touches[0];this.touch.startX=e.pageX+Math.abs(this.deltaX)},canvasTouchMove:function(t){if(this.touch.initiated){var e=t.touches[0];this.deltaX=e.pageX-this.touch.startX,this.deltaX>=0&&(this.deltaX=0),this.deltaX<=-(this.$refs.canvas.offsetWidth-this.$refs.canvas.parentNode.offsetWidth)&&(this.deltaX=-(this.$refs.canvas.offsetWidth-this.$refs.canvas.parentNode.offsetWidth)),this.$refs.canvas.style.webkitTransform="translateX("+this.deltaX+"px)"}},canvasTouchEnd:function(t){this.touch.initiated=!1},_getWeatherType:function(t,e){this.bgImg=Object(r.b)(t,e).bgImg,this.tips=Object(r.b)(t,e).tips,this.icon=Object(r.b)(t,e).icon},_getWeatherList:function(){var t=this;(function(){var t="http://www.cq.cn/x/air/tianqi4/index.php/play/getWeatherYb/search/"+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"");return n.a.get(t)})(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").then(function(e){var a=(new Date).getHours();console.log(e.data.data[1]),e.data.error===i.a?(t.weatherList=e.data.data,t.loaded=!0,t.city=e.data.data[0].cityname,t.province=e.data.data[0].provincename,t.dayList=e.data.day,t.nightList=e.data.night,t.sunList=e.data.sun,t.rankList=e.data.time,t.canvasList=a>18?e.data.night:e.data.day,t.ToDayWenDU=a>18?parseInt(e.data.data[0].night_wendu):parseInt(e.data.data[0].day_wendu),t.ToDayTianQi=a>18?e.data.data[0].night_tianqi:e.data.data[0].day_tianqi,t._getWeatherType(t.ToDayTianQi,t.ToDayWenDU),t.error=!1):t.error=!0}).catch(function(e){t.error=!0})},btn:function(t,e){this.dayBtn=e,this.canvasList=t},search:function(){if(this.searchShow){var t=this.$refs.searchInput.value;if(""===t)return void(this.searchShow=!1);if(t===this.city)return alert("和当前城市相同,请重新输入!"),void(this.searchShow=!1);this.loaded=!1,this._getWeatherList(t),t="",this.searchShow=!1}else this.searchShow=!0},searchKeyDown:function(){var t=this.$refs.searchInput.value;if(t===this.city)return alert("和当前城市相同,请重新输入!"),void(this.searchShow=!1);this.loaded=!1,this._getWeatherList(t),t="",this.searchShow=!1}},mounted:function(){this._getWeatherList()},components:{LineChart:h.a,FootBox:f.a,Loading:l.a,Wrong:d.a}}}});
//# sourceMappingURL=5.a486c02f63e5b4d90949.js.map