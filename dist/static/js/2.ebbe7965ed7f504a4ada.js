webpackJsonp([2],{"2TFR":function(t,e){},"4CwP":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=s("Oxpl");e.default={name:"list",props:{month:{type:Boolean,default:!0},number:{type:Number,default:0},start:{type:Number,default:0},address:{type:String,default:""},status:{type:String,default:"天气"}},data:function(){return{yearList:this.month?new Array(Math.ceil(this.number/3)):new Array(4),monthList:this.month?new Array(this.number):new Array(12)}},methods:{_numToString:function(t){return Object(r.c)(t)},historyDetail:function(t){var e=this.$refs.listItem[t].innerHTML.replace(/^\s+|\s+$/g,"");e=e.replace("年","-").replace("月",""),"天气"===this.status?this.$router.push({path:"historyDetail",query:{city:""+this.address,time:e}}):this.$router.push({path:"smogHistoryDetail",query:{city:""+this.address,time:e}})}}}},"5PMQ":function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"list"}},[s("h3",[t._v(t._s(t.start)+"年"+t._s(t.address)+"历史"+t._s(t.status)+"查询")]),t._v(" "),s("div",{staticClass:"list"},[s("ul",t._l(t.yearList,function(e,r){return s("li",{key:r},[t._v("\n        第"+t._s(t._numToString(r))+"季度\n      ")])})),t._v(" "),s("ol",t._l(t.monthList,function(e,r){return s("li",{key:r,ref:"listItem",refInFor:!0,on:{click:function(e){t.historyDetail(r)}}},[t._v("\n        "+t._s(t.start)+"年"+t._s(r+1)+"月\n      ")])}))])])},staticRenderFns:[]}},"8uf7":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=s("Dd8w"),i=s.n(r),n=s("IctP"),a=s("T452"),o=s("HVJf"),c=s("9Wym"),h=s.n(c),u=s("y/jF"),l=s.n(u),d=s("v0QW"),y=s.n(d);e.default={name:"history",data:function(){return{loaded:!1,error:!1,list:!0,historyList:[],city:"",province:"",startYear:0,number:0,searchShow:!1}},computed:i()({},Object(o.b)(["smogHistory"])),methods:i()({_getHistoryList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.smogHistory,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";Object(n.b)(e,s).then(function(e){e.data.error===a.a?(t.startYear=parseInt(e.data.time.min),t.city=e.data.cityname,t.province=e.data.provincename,t.number=parseInt(e.data.time.max_month),t.historyList=new Array(parseInt(e.data.time.max)-parseInt(e.data.time.min)+1),t.list=!0,t.loaded=!0,t.error=!1):(t.city=e.data.cityname,t.province=e.data.provincename,t.error=!0)}).catch(function(e){t.error=!0})},search:function(){if(this.searchShow){var t=this.$refs.searchInput.value;if(""===t)return void(this.searchShow=!1);if(t===this.city)return alert("和当前城市相同,请重新输入!"),void(this.searchShow=!1);this.list=!1,this.loaded=!1,this.setSmogHistory(t),this._getHistoryList(t),t="",this.searchShow=!1}else this.searchShow=!0},searchKeyDown:function(){var t=this.$refs.searchInput.value;if(t===this.city)return alert("和当前城市相同,请重新输入!"),void(this.searchShow=!1);this.list=!1,this.loaded=!1,this.setSmogHistory(t),this._getHistoryList(t),this.searchShow=!1,t=""}},Object(o.c)({setSmogHistory:"SET_SMOG_HISTORY"})),mounted:function(){this._getHistoryList()},components:{List:h.a,Loading:l.a,Wrong:y.a}}},"9Wym":function(t,e,s){s("vXb2");var r=s("mEwh")(s("4CwP"),s("5PMQ"),"data-v-4606491b",null);t.exports=r.exports},csFf:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{style:{background:"url('static/smogBg/中.jpg') no-repeat 0 0 / cover fixed"},attrs:{id:"history"}},[s("div",{staticClass:"inner"},[""!==t.city?s("div",{staticClass:"position"},[t._m(0),t._v(" "+t._s(t.city)+", "+t._s(t.province)+",中国\n      "),t.searchShow?s("input",{ref:"searchInput",attrs:{type:"text",autofocus:"autofocus",placeholder:"请输入您想查找的城市"},on:{keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.searchKeyDown(e)}}}):t._e(),t._v(" "),s("i",{staticClass:"icon-search",on:{click:t.search}})]):t._e(),t._v(" "),t._l(t.historyList,function(e,r){return t.list?s("list",{key:r,attrs:{status:"雾霾",month:r===t.historyList.length-1,start:t.startYear+r,number:t.number,address:t.city}}):t._e()}),t._v(" "),t.loaded||t.error?t._e():s("loading"),t._v(" "),t.error?s("wrong"):t._e()],2)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("i",{staticClass:"icon-position"})])}]}},gcQN:function(t,e,s){s("2TFR");var r=s("mEwh")(s("8uf7"),s("csFf"),"data-v-1c7fc934",null);t.exports=r.exports},vXb2:function(t,e){}});
//# sourceMappingURL=2.ebbe7965ed7f504a4ada.js.map