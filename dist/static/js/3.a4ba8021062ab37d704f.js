webpackJsonp([3],{"4CwP":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=r("Oxpl");e.default={name:"list",props:{month:{type:Boolean,default:!0},number:{type:Number,default:0},start:{type:Number,default:0},address:{type:String,default:""},status:{type:String,default:"天气"}},data:function(){return{yearList:this.month?new Array(Math.ceil(this.number/3)):new Array(4),monthList:this.month?new Array(this.number):new Array(12)}},methods:{_numToString:function(t){return Object(s.c)(t)},historyDetail:function(t){var e=this.$refs.listItem[t].innerHTML.replace(/^\s+|\s+$/g,"");e=e.replace("年","-").replace("月",""),"天气"===this.status?this.$router.push({path:"historyDetail",query:{city:""+this.address,time:e}}):this.$router.push({path:"smogHistoryDetail",query:{city:""+this.address,time:e}})}}}},"5PMQ":function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"list"}},[r("h3",[t._v(t._s(t.start)+"年"+t._s(t.address)+"历史"+t._s(t.status)+"查询")]),t._v(" "),r("div",{staticClass:"list"},[r("ul",t._l(t.yearList,function(e,s){return r("li",{key:s},[t._v("\n        第"+t._s(t._numToString(s))+"季度\n      ")])})),t._v(" "),r("ol",t._l(t.monthList,function(e,s){return r("li",{key:s,ref:"listItem",refInFor:!0,on:{click:function(e){t.historyDetail(s)}}},[t._v("\n        "+t._s(t.start)+"年"+t._s(s+1)+"月\n      ")])}))])])},staticRenderFns:[]}},"9Wym":function(t,e,r){r("vXb2");var s=r("mEwh")(r("4CwP"),r("5PMQ"),"data-v-4606491b",null);t.exports=s.exports},PLP5:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{style:{background:"url('static/smogBg/中.jpg') no-repeat 0 0 / cover fixed"},attrs:{id:"history"}},[r("div",{staticClass:"inner"},[""!==t.city?r("div",{staticClass:"position"},[t._m(0),t._v(" "+t._s(t.city)+", "+t._s(t.province)+",中国\n      "),t.searchShow?r("input",{ref:"searchInput",attrs:{type:"text",autofocus:"autofocus",placeholder:"请输入您想查找的城市"},on:{keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.searchKeyDown(e)}}}):t._e(),t._v(" "),r("i",{staticClass:"icon-search",on:{click:t.search}})]):t._e(),t._v(" "),t._l(t.historyList,function(e,s){return t.list?r("list",{key:s,attrs:{month:s===t.historyList.length-1,start:t.startYear+s,number:t.number,address:t.city}}):t._e()}),t._v(" "),t.loaded||t.error?t._e():r("loading"),t._v(" "),t.error?r("wrong"):t._e()],2)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("i",{staticClass:"icon-position"})])}]}},daa0:function(t,e){},pAca:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=r("Dd8w"),i=r.n(s),n=r("IctP"),a=r("T452"),o=r("HVJf"),c=r("9Wym"),h=r.n(c),u=r("y/jF"),l=r.n(u),d=r("v0QW"),y=r.n(d);e.default={name:"history",data:function(){return{loaded:!1,error:!1,list:!0,historyList:[],city:"",province:"",startYear:0,number:0,searchShow:!1}},computed:i()({},Object(o.b)(["weatherHistory"])),methods:i()({_getHistoryList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.weatherHistory,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";console.log(e),Object(n.a)(e,r).then(function(e){e.data.error===a.a?(t.startYear=parseInt(e.data.time.min),t.city=e.data.cityname,t.province=e.data.provincename,t.number=parseInt(e.data.time.max_month),t.historyList=new Array(parseInt(e.data.time.max)-parseInt(e.data.time.min)+1),t.list=!0,t.loaded=!0,t.error=!1):(t.city=e.data.cityname,t.province=e.data.provincename,t.error=!0)}).catch(function(e){t.error=!0})},search:function(){if(this.searchShow){var t=this.$refs.searchInput.value;if(""===t)return void(this.searchShow=!1);if(t===this.city)return alert("和当前城市相同,请重新输入!"),void(this.searchShow=!1);this.list=!1,this.loaded=!1,this.setWeatherHistory(t),this._getHistoryList(t),t="",this.searchShow=!1}else this.searchShow=!0},searchKeyDown:function(){var t=this.$refs.searchInput.value;if(t===this.city)return alert("和当前城市相同,请重新输入!"),void(this.searchShow=!1);this.list=!1,this.loaded=!1,this.setWeatherHistory(t),this._getHistoryList(t),this.searchShow=!1,t=""}},Object(o.c)({setWeatherHistory:"SET_WEATHER_HISTORY"})),mounted:function(){this._getHistoryList()},components:{List:h.a,Loading:l.a,Wrong:y.a}}},uMlJ:function(t,e,r){r("daa0");var s=r("mEwh")(r("pAca"),r("PLP5"),"data-v-3121d60a",null);t.exports=s.exports},vXb2:function(t,e){}});
//# sourceMappingURL=3.a4ba8021062ab37d704f.js.map