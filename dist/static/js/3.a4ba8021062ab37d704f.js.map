{"version":3,"sources":["webpack:///list.vue","webpack:///./src/base/list/list.vue?0789","webpack:///./src/base/list/list.vue?4c53","webpack:///./src/components/history/history.vue?9230","webpack:///history.vue","webpack:///./src/components/history/history.vue?81b4"],"names":["__webpack_exports__","Boolean","Number","String","num","path","address","item","module","exports","render","_vm","this","_h","$createElement","_c","_self","attrs","id","_v","_s","start","status","staticClass","_l","index","key","_numToString","ref","refInFor","on","click","$event","historyDetail","staticRenderFns","__webpack_require__","Component","style","background","city","_m","province","type","autofocus","placeholder","keydown","_k","keyCode","searchKeyDown","_e","search","month","historyList","length","startYear","number","loaded","error","computed","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default","Object","__WEBPACK_IMPORTED_MODULE_3_vuex__","methods","_this","min","cityname","provincename","max_month","value","_getHistoryList","List","__WEBPACK_IMPORTED_MODULE_4_base_list_list___default","a","Loading","__WEBPACK_IMPORTED_MODULE_5_base_loading_loading___default","Wrong","__WEBPACK_IMPORTED_MODULE_6_base_error_error___default"],"mappings":"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","file":"static/js/3.a4ba8021062ab37d704f.js","sourcesContent":["<template>\r\n  <div id=\"list\">\r\n    <h3>{{start}}年{{address}}历史{{status}}查询</h3>\r\n    <div class=\"list\">\r\n      <ul>\r\n        <li v-for=\"(item,index) in yearList\" :key=\"index\">\r\n          第{{_numToString(index)}}季度\r\n        </li>\r\n      </ul>\r\n      <ol>\r\n        <li v-for=\"(item,index) in monthList\"\r\n            :key=\"index\"\r\n            @click=\"historyDetail(index)\"\r\n            ref=\"listItem\">\r\n          {{start}}年{{index+1}}月\r\n        </li>\r\n      </ol>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script type=\"text/ecmascript-6\">\r\n  import { numToString } from 'common/js/getType'\r\n\r\n  export default {\r\n    name: 'list',\r\n    props: {\r\n      month: {\r\n        type: Boolean,\r\n        default: true\r\n      },\r\n      number: {\r\n        type: Number,\r\n        default: 0\r\n      },\r\n      start: {\r\n        type: Number,\r\n        default: 0\r\n      },\r\n      address: {\r\n        type: String,\r\n        default: ''\r\n      },\r\n      status: {\r\n        type: String,\r\n        default: '天气'\r\n      }\r\n    },\r\n    data () {\r\n      return {\r\n        yearList: this.month ? new Array(Math.ceil(this.number / 3)) : new Array(4),\r\n        monthList: this.month ? new Array(this.number) : new Array(12)\r\n      }\r\n    },\r\n    methods: {\r\n      _numToString (num) {\r\n        return numToString(num)\r\n      },\r\n      historyDetail (index) {\r\n        let item = this.$refs.listItem[index].innerHTML.replace(/^\\s+|\\s+$/g, '')\r\n        item = item.replace('年', '-').replace('月', '')\r\n        if (this.status === '天气') {\r\n          this.$router.push({\r\n            path: `historyDetail`,\r\n            query: {\r\n              city: `${this.address}`,\r\n              time: item\r\n            }\r\n          })\r\n        } else {\r\n          this.$router.push({\r\n            path: `smogHistoryDetail`,\r\n            query: {\r\n              city: `${this.address}`,\r\n              time: item\r\n            }\r\n          })\r\n        }\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" scoped rel=\"stylesheet/less\" type=\"text/less\">\r\n  @media screen and (max-width: 750px) {\r\n    #list {\r\n      ul {\r\n        display: none;\r\n      }\r\n    }\r\n  }\r\n\r\n  #list {\r\n    background-color: rgba(0, 0, 0, .5);\r\n    margin-top: 40px;\r\n    padding: 10px;\r\n    box-sizing: border-box;\r\n    h3 {\r\n      font-size: 24px;\r\n      letter-spacing: 2px;\r\n    }\r\n    .list {\r\n      display: flex;\r\n      justify-content: space-between;\r\n      flex-wrap: nowrap;\r\n      text-align: center;\r\n      ul {\r\n        flex: 1;\r\n        padding-top: 10px;\r\n        box-sizing: border-box;\r\n        li {\r\n          line-height: 3;\r\n          font-size: 14px;\r\n        }\r\n      }\r\n      ol {\r\n        flex: 10;\r\n        display: flex;\r\n        justify-content: start;\r\n        flex-wrap: wrap;\r\n        padding-top: 10px;\r\n        box-sizing: border-box;\r\n        li {\r\n          width: 33%;\r\n          line-height: 3;\r\n          color: #08c;\r\n          cursor: pointer;\r\n          font-size: 13px;\r\n          &:hover {\r\n            color: #005580;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n</style>\n\n\n// WEBPACK FOOTER //\n// list.vue?4f7ffa0a","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"list\"\n    }\n  }, [_c('h3', [_vm._v(_vm._s(_vm.start) + \"年\" + _vm._s(_vm.address) + \"历史\" + _vm._s(_vm.status) + \"查询\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"list\"\n  }, [_c('ul', _vm._l((_vm.yearList), function(item, index) {\n    return _c('li', {\n      key: index\n    }, [_vm._v(\"\\n        第\" + _vm._s(_vm._numToString(index)) + \"季度\\n      \")])\n  })), _vm._v(\" \"), _c('ol', _vm._l((_vm.monthList), function(item, index) {\n    return _c('li', {\n      key: index,\n      ref: \"listItem\",\n      refInFor: true,\n      on: {\n        \"click\": function($event) {\n          _vm.historyDetail(index)\n        }\n      }\n    }, [_vm._v(\"\\n        \" + _vm._s(_vm.start) + \"年\" + _vm._s(index + 1) + \"月\\n      \")])\n  }))])])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@11.3.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-4606491b\",\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"}}!./node_modules/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=template&index=0!./src/base/list/list.vue\n// module id = 5PMQ\n// module chunks = 2 3","\n/* styles */\nrequire(\"!!../../../node_modules/_extract-text-webpack-plugin@2.1.2@extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@11.3.4@vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-4606491b\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=styles&index=0!./list.vue\")\n\nvar Component = require(\"!../../../node_modules/_vue-loader@11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=script&index=0!./list.vue\"),\n  /* template */\n  require(\"!!../../../node_modules/_vue-loader@11.3.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4606491b\\\",\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"}}!../../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=template&index=0!./list.vue\"),\n  /* scopeId */\n  \"data-v-4606491b\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/base/list/list.vue\n// module id = 9Wym\n// module chunks = 2 3","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    style: ({\n      'background': \"url('static/smogBg/中.jpg') no-repeat 0 0 / cover fixed\"\n    }),\n    attrs: {\n      \"id\": \"history\"\n    }\n  }, [_c('div', {\n    staticClass: \"inner\"\n  }, [(_vm.city !== '') ? _c('div', {\n    staticClass: \"position\"\n  }, [_vm._m(0), _vm._v(\" \" + _vm._s(_vm.city) + \", \" + _vm._s(_vm.province) + \",中国\\n      \"), (_vm.searchShow) ? _c('input', {\n    ref: \"searchInput\",\n    attrs: {\n      \"type\": \"text\",\n      \"autofocus\": \"autofocus\",\n      \"placeholder\": \"请输入您想查找的城市\"\n    },\n    on: {\n      \"keydown\": function($event) {\n        if (!('button' in $event) && _vm._k($event.keyCode, \"enter\", 13, $event.key)) { return null; }\n        _vm.searchKeyDown($event)\n      }\n    }\n  }) : _vm._e(), _vm._v(\" \"), _c('i', {\n    staticClass: \"icon-search\",\n    on: {\n      \"click\": _vm.search\n    }\n  })]) : _vm._e(), _vm._v(\" \"), _vm._l((_vm.historyList), function(item, index) {\n    return (_vm.list) ? _c('list', {\n      key: index,\n      attrs: {\n        \"month\": index === _vm.historyList.length - 1,\n        \"start\": _vm.startYear + index,\n        \"number\": _vm.number,\n        \"address\": _vm.city\n      }\n    }) : _vm._e()\n  }), _vm._v(\" \"), (!_vm.loaded && !_vm.error) ? _c('loading') : _vm._e(), _vm._v(\" \"), (_vm.error) ? _c('wrong') : _vm._e()], 2)])\n},staticRenderFns: [function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('span', [_c('i', {\n    staticClass: \"icon-position\"\n  })])\n}]}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@11.3.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-3121d60a\",\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"}}!./node_modules/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=template&index=0!./src/components/history/history.vue\n// module id = PLP5\n// module chunks = 3","<template>\r\n  <div id=\"history\" :style=\"{\r\n  'background': `url('static/smogBg/中.jpg') no-repeat 0 0 / cover fixed`}\">\r\n    <div class=\"inner\">\r\n      <div class=\"position\" v-if=\"city!==''\">\r\n        <span><i class=\"icon-position\"></i></span> {{city}}, {{province}},中国\r\n        <input @keydown.enter=\"searchKeyDown\"\r\n               type=\"text\"\r\n               ref=\"searchInput\"\r\n               autofocus=\"autofocus\"\r\n               v-if=\"searchShow\"\r\n               placeholder=\"请输入您想查找的城市\">\r\n        <i class=\"icon-search\" @click=\"search\"></i>\r\n      </div>\r\n      <list v-if=\"list\"\r\n            v-for=\"(item,index) in historyList\"\r\n            :key=\"index\"\r\n            :month=\"index===historyList.length-1\"\r\n            :start=\"startYear+index\"\r\n            :number=\"number\"\r\n            :address=\"city\"></list>\r\n      <loading v-if=\"!loaded && !error\"></loading>\r\n      <wrong v-if=\"error\"></wrong>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script type=\"text/ecmascript-6\">\r\n  import { getHistoryList } from 'api/getHistoryList'\r\n  import { ERROR } from 'api/config'\r\n  import { mapMutations, mapGetters } from 'vuex'\r\n\r\n  import List from 'base/list/list'\r\n  import Loading from 'base/loading/loading'\r\n  import Wrong from 'base/error/error'\r\n\r\n  export default {\r\n    name: 'history',\r\n    data () {\r\n      return {\r\n        loaded: false,\r\n        error: false,\r\n        list: true,\r\n        historyList: [],\r\n        city: '',\r\n        province: '',\r\n        startYear: 0,\r\n        number: 0,\r\n        searchShow: false\r\n      }\r\n    },\r\n    computed: {\r\n      ...mapGetters([\r\n        'weatherHistory'\r\n      ])\r\n    },\r\n    methods: {\r\n      _getHistoryList (city = this.weatherHistory, time = '') {\r\n        console.log(city)\r\n        getHistoryList(city, time).then((res) => {\r\n          if (res.data.error === ERROR) {\r\n            this.startYear = parseInt(res.data.time.min)\r\n            this.city = res.data.cityname\r\n            this.province = res.data.provincename\r\n            this.number = parseInt(res.data.time.max_month)\r\n            this.historyList = new Array(parseInt(res.data.time.max) - parseInt(res.data.time.min) + 1)\r\n            this.list = true\r\n            this.loaded = true\r\n            this.error = false\r\n          } else {\r\n            this.city = res.data.cityname\r\n            this.province = res.data.provincename\r\n            this.error = true\r\n          }\r\n        }).catch((res) => {\r\n          this.error = true\r\n        })\r\n      },\r\n      search () {\r\n        if (this.searchShow) {\r\n          let city = this.$refs.searchInput.value\r\n          if (city === '') {\r\n            this.searchShow = false\r\n            return\r\n          }\r\n          if (city === this.city) {\r\n            alert('和当前城市相同,请重新输入!')\r\n            this.searchShow = false\r\n            return\r\n          }\r\n          this.list = false\r\n          this.loaded = false\r\n          this.setWeatherHistory(city)\r\n          this._getHistoryList(city)\r\n          city = ''\r\n          this.searchShow = false\r\n        } else {\r\n          this.searchShow = true\r\n        }\r\n      },\r\n      searchKeyDown () {\r\n        let city = this.$refs.searchInput.value\r\n        if (city === this.city) {\r\n          alert('和当前城市相同,请重新输入!')\r\n          this.searchShow = false\r\n          return\r\n        }\r\n        this.list = false\r\n        this.loaded = false\r\n        this.setWeatherHistory(city)\r\n        this._getHistoryList(city)\r\n        this.searchShow = false\r\n        city = ''\r\n      },\r\n      ...mapMutations({\r\n        setWeatherHistory: 'SET_WEATHER_HISTORY'\r\n      })\r\n    },\r\n    mounted () {\r\n      this._getHistoryList()\r\n    },\r\n    components: {\r\n      List,\r\n      Loading,\r\n      Wrong\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" scoped rel=\"stylesheet/less\" type=\"text/less\">\r\n  #history {\r\n    color: #fff;\r\n    min-height: 100%;\r\n    padding-top: 100px;\r\n    padding-bottom: 20px;\r\n    box-sizing: border-box;\r\n    transition: all 2s;\r\n    .position {\r\n      width: fit-content;\r\n      padding: 0 20px;\r\n      margin: 10px 0;\r\n      border-radius: 15px;\r\n      height: 30px;\r\n      line-height: 30px;\r\n      color: #fff;\r\n      font-size: 18px;\r\n      background-color: rgba(0, 0, 0, .5);\r\n      transition: all 0.3s;\r\n      span {\r\n        padding-right: 0.2rem;\r\n        font-size: 20px;\r\n        color: rgb(255, 90, 60)\r\n      }\r\n      input {\r\n        height: 20px;\r\n        background-color: transparent;\r\n        border: none;\r\n        color: #ddd;\r\n        outline: #ddd;\r\n        border-bottom: 1px solid #ccc;\r\n      }\r\n    }\r\n  }\r\n</style>\n\n\n// WEBPACK FOOTER //\n// history.vue?d8e999b8","\n/* styles */\nrequire(\"!!../../../node_modules/_extract-text-webpack-plugin@2.1.2@extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@11.3.4@vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-3121d60a\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=styles&index=0!./history.vue\")\n\nvar Component = require(\"!../../../node_modules/_vue-loader@11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=script&index=0!./history.vue\"),\n  /* template */\n  require(\"!!../../../node_modules/_vue-loader@11.3.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3121d60a\\\",\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"}}!../../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=template&index=0!./history.vue\"),\n  /* scopeId */\n  \"data-v-3121d60a\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/history/history.vue\n// module id = uMlJ\n// module chunks = 3"],"sourceRoot":""}