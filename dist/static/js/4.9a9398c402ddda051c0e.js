webpackJsonp([4],{"3Etm":function(t,e){},J3Sf:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{style:{background:"url('static/smogBg/"+t.bgImg+".jpg') no-repeat 0 0 / cover fixed"},attrs:{id:"smog"}},[s("div",{staticClass:"inner"},[""!==t.smogCity?s("div",{staticClass:"position"},[t._m(0),t._v(" "+t._s(t.smogCity)+", "+t._s(t.province)+", 中国\n        "),t.searchShow?s("input",{ref:"searchInput",attrs:{type:"text",autofocus:"autofocus",placeholder:"请输入您想查找的城市"},on:{keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.searchKeyDown(e)}}}):t._e(),t._v(" "),s("i",{staticClass:"icon-search",on:{click:t.search}})]):t._e(),t._v(" "),s("dl",{staticClass:"content"},[s("dt",[s("h2",{style:{color:t.smogColor}},[t._v(t._s(t.weatherList.num))]),t._v(" "),""!==t.smogCity?s("em",{style:{color:t.smogColor}},[t._v(t._s(t.bgImg))]):t._e()]),t._v(" "),s("dd",{staticClass:"ac text_hide"},[s("span",[t._v("今日雾霾提示")]),t._v(" "),s("span",[t._v(t._s(t.tips))])])]),t._v(" "),s("div",{staticClass:"wrapper"},[s("div",{staticClass:"more_weather"},[s("ul",{staticClass:"weather_list"},[t._m(1),t._v(" "),s("li",{staticClass:"list_num"},[s("div",{staticClass:"item",domProps:{innerHTML:t._s(null===t.weatherList.num?"暂无":t.weatherList.num)}}),t._v(" "),s("div",{staticClass:"item",domProps:{innerHTML:t._s(null===t.weatherList.status?"暂无":t.weatherList.status)}}),t._v(" "),s("div",{staticClass:"item",domProps:{innerHTML:t._s(null===t.weatherList.pm25?"暂无":t.weatherList.pm25)}}),t._v(" "),s("div",{staticClass:"item",domProps:{innerHTML:t._s(null===t.weatherList.pm10?"暂无":t.weatherList.pm10)}}),t._v(" "),s("div",{staticClass:"item",domProps:{innerHTML:t._s(null===t.weatherList.co?"暂无":t.weatherList.co)}}),t._v(" "),s("div",{staticClass:"item",domProps:{innerHTML:t._s(null===t.weatherList.no2?"暂无":t.weatherList.no2)}}),t._v(" "),s("div",{staticClass:"item",domProps:{innerHTML:t._s(null===t.weatherList.so2?"暂无":t.weatherList.so2)}}),t._v(" "),s("div",{staticClass:"item",domProps:{innerHTML:t._s(null===t.weatherList.o3?"暂无":t.weatherList.o3)}})])])]),t._v(" "),s("div",{staticClass:"rank"},[s("h4",{staticClass:"text_hide"},[t._v("雾霾统计概况")]),t._v(" "),t.rank.length?s("ul",[s("Li",[s("p",[s("span",[t._v("月最高AQI")]),t._v(" : "+t._s(t.rank[0])+" (出现在"+t._s(t.rank[1])+")")])]),t._v(" "),s("Li",[s("p",[s("span",[t._v("月最低AQI")]),t._v(" : "+t._s(t.rank[2])+" (出现在"+t._s(t.rank[3])+")")])])],1):t._e()])]),t._v(" "),s("div",{staticClass:"canvas_wrapper",on:{touchstart:t.canvasTouchStart,touchmove:t.canvasTouchMove,touchend:t.canvasTouchEnd}},[s("div",{ref:"canvas",staticClass:"canvas"},[s("line-chart",{attrs:{rowData:t.list,colData:t.colList}})],1)]),t._v(" "),s("foot-box"),t._v(" "),t.list.length||t.error?t._e():s("loading"),t._v(" "),t.error?s("wrong"):t._e()],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("i",{staticClass:"icon-position"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",{staticClass:"list_item"},[e("div",{staticClass:"item text_hide"},[this._v("AQI指数")]),this._v(" "),e("div",{staticClass:"item text_hide"},[this._v("空气质量")]),this._v(" "),e("div",{staticClass:"item text_hide"},[this._v("PM2.5")]),this._v(" "),e("div",{staticClass:"item text_hide"},[this._v("PM10")]),this._v(" "),e("div",{staticClass:"item text_hide"},[this._v("CO")]),this._v(" "),e("div",{staticClass:"item text_hide"},[this._v("NO"),e("sub",[this._v("2")])]),this._v(" "),e("div",{staticClass:"item text_hide"},[this._v("SO"),e("sub",[this._v("2")])]),this._v(" "),e("div",{staticClass:"item text_hide"},[this._v("O"),e("sub",[this._v("3")])])])}]}},JPBB:function(t,e){},Kr1H:function(t,e,s){s("JPBB");var i=s("mEwh")(s("Re8f"),s("QB43"),"data-v-4f5e1271",null);t.exports=i.exports},M8yz:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("Dd8w"),a=s.n(i),r=s("T452"),n=s("BMa3"),o=s.n(n),h=s("Oxpl"),c=s("HVJf"),l=s("Kr1H"),v=s.n(l),f=s("dQCR"),d=s.n(f),u=s("y/jF"),m=s.n(u),p=s("v0QW"),_=s.n(p);e.default={data:function(){return{error:!1,province:"",searchShow:!1,weatherList:{},list:[],colList:[],smogColor:"#fff",bgImg:"中",tips:"",rank:[],deltaX:0}},created:function(){this.touch={}},computed:a()({},Object(c.b)(["smogCity"])),methods:a()({canvasTouchStart:function(t){this.touch.initiated=!0;var e=t.touches[0];this.touch.startX=e.pageX+Math.abs(this.deltaX)},canvasTouchMove:function(t){if(this.touch.initiated){var e=t.touches[0];this.deltaX=e.pageX-this.touch.startX,this.deltaX>=0&&(this.deltaX=0),this.deltaX<=-(this.$refs.canvas.offsetWidth-this.$refs.canvas.parentNode.offsetWidth)&&(this.deltaX=-(this.$refs.canvas.offsetWidth-this.$refs.canvas.parentNode.offsetWidth)),this.$refs.canvas.style.webkitTransform="translateX("+this.deltaX+"px)"}},canvasTouchEnd:function(t){this.touch.initiated=!1},_getWeatherList:function(){var t=this;(function(){var t="http://www.cq.cn/x/air/tianqi4/index.php/play/getAqiNow/search/"+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all");return o.a.get(t)})(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").then(function(e){console.log(e.data),e.data.error===r.a?(t.weatherList=e.data.data,t.list=e.data.list,t.colList=e.data.day,t.rank=e.data.time,t.setSmogCity(e.data.data.cityname),t.province=e.data.data.provincename,t.smogColor=Object(h.a)(e.data.data.num).smogColor,t.bgImg=Object(h.a)(e.data.data.num).bgImg,t.tips=Object(h.a)(e.data.data.num).tips,t.error=!1):t.error=!0}).catch(function(e){t.error=!0})},search:function(){if(this.searchShow){var t=this.$refs.searchInput.value;if(""===t)return void(this.searchShow=!1);if(t===this.smogCity)return alert("和当前城市相同,请重新输入!"),void(this.searchShow=!1);this.setSmogCity(t),this._getWeatherList(t),t="",this.searchShow=!1}else this.searchShow=!0},searchKeyDown:function(){var t=this.$refs.searchInput.value;if(t===this.smogCity)return alert("和当前城市相同,请重新输入!"),void(this.searchShow=!1);this.setSmogCity(t),this._getWeatherList(t),t="",this.searchShow=!1}},Object(c.c)({setSmogCity:"SET_SMOG_CITY"})),mounted:function(){this._getWeatherList(this.smogCity)},components:{LineChart:v.a,FootBox:d.a,Loading:m.a,Wrong:_.a}}},QB43:function(t,e){t.exports={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{ref:"wrapper",attrs:{id:"lineChart"}},[e("canvas",{ref:"canvas",attrs:{id:"canvas"},on:{mouseleave:this.canvasMouseLeave,mousemove:this.canvasMouseMove}}),this._v(" "),this.load&&this.rowData.length?e("div",{staticClass:"download",on:{click:this.download}},[this._v("下载图片")]):this._e()])},staticRenderFns:[]}},Re8f:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{rowData:{type:Array,default:[]},colData:{type:Array,default:function(){return[]}},colStart:{type:Number,default:1},row:{type:Number,default:5},load:{type:Boolean,default:!0},hoverLine:{type:Boolean,default:!0},playing:{type:Boolean,default:!0},imgType:{type:String,default:"jpg"}},data:function(){return{Axis:[]}},methods:{saveFile:function(t,e){var s=document.createElementNS("http://www.w3.org/1999/xhtml","a");s.href=t,s.download=e;var i=document.createEvent("MouseEvents");i.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),s.dispatchEvent(i)},download:function(){var t=this.$refs.canvas;this.imgType.match(/png|jpeg|jpg|bmp|gif/)||(this.imgType="jpg"),this.saveFile(t.toDataURL("image/"+this.imgType),(new Date).getTime()+"."+this.imgType)},canvasMouseMove:function(t){if(t=t||event,this.hoverLine||this.isPC())for(var e=this.$refs.canvas.getContext("2d"),s=t.clientX-this.$refs.wrapper.offsetLeft-this.$refs.wrapper.parentNode.offsetLeft,i=0;i<this.Axis.length;i++)s>=parseInt(this.Axis[i].x)-2&&s<=parseInt(this.Axis[i].x)+2&&(e.clearRect(0,0,this.$refs.canvas.offsetWidth,this.$refs.canvas.offsetHeight),this.initCanvas(!1),this.createStroke(this.Axis[i].x,0,this.Axis[i].x,this.$refs.canvas.offsetHeight,e))},canvasMouseLeave:function(){this.hoverLine&&this.initCanvas(!1)},numberToFixed:function(t){return t=t.toFixed(2),t=parseInt(t)},createCanvas:function(){var t=this;clearInterval(this.createTimer),this.createTimer=setInterval(function(){t.createAxis(),t.rowData.length&&(t.initCanvas(t.playing),clearInterval(t.createTimer))},30)},getNumberSize:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e?5*Math.floor(t/5):t<0&&!e?5*Math.ceil(t/5):t<0?5*Math.ceil(t/5):t>=0?5*Math.ceil(t/5):void 0},setRowNumber:function(t,e){if(this.rowData.length)for(var s=(t-50)/this.row,i=this.getNumberSize(Math.max.apply(Math,this.rowData)),a=this.getNumberSize(Math.min.apply(Math,this.rowData),!0),r=i-a,n=0;n<this.row;n++)this.createText(20,t-(47+n*s),e,this.numberToFixed(a+n*r/(this.row-1)))},setColNumber:function(t,e,s){for(var i=this.colStart;i<this.rowData.length+this.colStart;i++)this.createText(58+(t-60)/this.rowData.length*(i-this.colStart),e-20,s,this.colData.length<=0?i:this.colData[i-1])},setWeatherPosition:function(t){var e=this.getNumberSize(Math.max.apply(Math,this.rowData)),s=this.getNumberSize(Math.min.apply(Math,this.rowData),!0),i=(t-s)/(e-s<=0?1:e-s);return(this.row-1)*((this.$refs.canvas.offsetHeight-50)/this.row)*Math.abs(i)},createArc:function(t,e,s){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#fff",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3;s.beginPath(),s.fillStyle=i,s.strokeStyle=i,s.arc(t,e,a,r,4*Math.PI),s.fill(),s.stroke(),s.closePath()},createText:function(t,e,s,i){s.beginPath(),s.fillStyle="#fff",s.fillText(i,t,e),s.closePath()},createStroke:function(t,e,s,i,a){a.beginPath(),a.moveTo(t,e),a.lineTo(s,i),a.lineWidth=1,a.strokeStyle="#fff",a.stroke(),a.closePath()},createAxis:function(){if(this.rowData.length&&this.$refs.wrapper){this.Axis=[];for(var t=this.getNumberSize(Math.max.apply(Math,this.rowData)),e=this.getNumberSize(Math.min.apply(Math,this.rowData)),s=t-e==0?1:t-e,i=this.$refs.canvas.offsetWidth,a=this.$refs.canvas.offsetHeight,r=0;r<this.rowData.length;r++)this.Axis.push({x:60+(i-60)/this.rowData.length*r,y:1===s?this.$refs.canvas.offsetHeight/2:a-this.setWeatherPosition(this.rowData[r])-50})}},initLine:function(t){var e=this,s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=0;if(clearInterval(this.timer),this.rowData.length)if(s)this.timer=setInterval(function(){e.createText(e.Axis[i].x-5,e.Axis[i].y-10,t,e.rowData[i]),e.createArc(e.Axis[i].x,e.Axis[i].y,t),e.Axis[i+1]?(e.createStroke(e.Axis[i].x,e.Axis[i].y,e.Axis[i+1].x,e.Axis[i+1].y,t),i++):clearInterval(e.timer)},30);else for(var a=0;a<this.Axis.length;a++){if(this.createArc(this.Axis[a].x,this.Axis[a].y,t),this.createText(this.Axis[a].x-5,this.Axis[a].y-10,t,this.rowData[a]),!this.Axis[a+1])return;this.createStroke(this.Axis[a].x,this.Axis[a].y,this.Axis[a+1].x,this.Axis[a+1].y,t)}},initCanvas:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.playing,e=this.$refs.canvas,s=e.getContext("2d");if(this.$refs.wrapper){var i=this.$refs.canvas.offsetWidth,a=this.$refs.canvas.offsetHeight;e.width=this.$refs.canvas.offsetWidth,e.height=this.$refs.canvas.offsetHeight,s.clearRect(0,0,i,a),s.fillStyle="transparent",s.fillRect(0,0,i,a),this.setRowNumber(a,s),this.setColNumber(i,a,s),this.initLine(s,t)}}},mounted:function(){var t=this;this.rowData.length&&(this.createCanvas(),window.addEventListener("resize",function(){t.$refs.wrapper&&(t.createAxis(),t.initCanvas())}))},watch:{rowData:function(){this.rowData.length&&(clearInterval(this.timer),this.createAxis(),this.initCanvas())}},deactivated:function(){clearInterval(this.createTimer),clearInterval(this.timer)}}},Up7k:function(t,e,s){s("3Etm");var i=s("mEwh")(s("M8yz"),s("J3Sf"),"data-v-501720c0",null);t.exports=i.exports}});
//# sourceMappingURL=4.9a9398c402ddda051c0e.js.map